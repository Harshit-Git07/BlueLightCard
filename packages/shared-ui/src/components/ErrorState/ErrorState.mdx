import { Meta, Canvas, Controls } from '@storybook/blocks';
import AmplitudeEvents from '../../utils/amplitude/events';
import ComponentStatus from '../../../.storybook/blocks/ComponentStatus';
import FigmaEmbed from '../../../.storybook/blocks/FigmaEmbed';
import * as ErrorState from './ErrorState.stories';

<Meta of={ErrorState} />

# Error State

- [Status](#status)
- [Overview](#overview)
- [Props](#props)
- [State](#state)
- [Variants and States](#variants-and-states)
- [Implementation](#implementation)
- [Usage Guidelines](#usage-guidelines)
- [Design](#design)

## Status

<ComponentStatus />

## Overview

This component renders a generic error state that can be used across the product.

## Props

This component uses default values and behaviour that can be customised if you wish to display something more specific for certain scenarios:

<Controls />

## State

This component uses no state.

## Analytics

This component logs two analytics events to Amplitude:

- <code>{AmplitudeEvents.ERROR_STATE.VIEWED}</code> is logged once when the error state is viewed for
  the given `page`
- <code>{AmplitudeEvents.ERROR_STATE.CTA_CLICKED}</code> is logged every time a user clicks on the error
  state call to action

## Variants and States

List of variants can be shown below here.

### Default

<Canvas of={ErrorState.Default} />

### Customised

<Canvas of={ErrorState.Customised} />

## Implementation

```jsx
import ErrorBoundary from 'react-error-boundary';
import { ErrorState } from '@bluelightcard/shared-ui';

const Page: FC = () => {
  return (
    <ErrorBoundary fallback={<ErrorState page="example_page" />}>
      <ChildComponent />
    </ErrorBoundary>
  );
};
```

## Design

<FigmaEmbed />
