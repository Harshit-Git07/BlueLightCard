import { Canvas, Controls, Meta, Story, DocsContext } from '@storybook/blocks';
import { AmplitudeEvents } from '@bluelightcard/shared-ui';
import ComponentStatus from '@bluelightcard/shared-ui/storybook-config/blocks/ComponentStatus';
import FigmaEmbed from '@bluelightcard/shared-ui/storybook-config/blocks/FigmaEmbed';
import * as FlexibleOffers from './flexible-offers.stories';

<Meta title="Pages/Flexible Offers" of={FlexibleOffers} />

# Flexible Offers

- [Status](#status)
- [Overview](#overview)
- [Props](#props)
- [State](#state)
- [Analytics](#analytics)
- [Design](#design)

## Status

<ComponentStatus />

## Overview

- This page renders the content for a single flexible menu on the path of `/flexible-offers?id=[menuId]`
- The page includes different visual states for: loading, error, and success
- The page is responsive and will scale to fit mobile, tablet, and desktop
- The page is accessible so each offer in the list can be focused and read by screen readers
- The page is tokenised according to the design system

## Props

<Controls />

## State

The page uses Suspense and React Query to manage all of the data fetching and related state. It manages no specific state of its own.

## Analytics

The page logs two analytics events to Amplitude:

- <code>{AmplitudeEvents.FLEXIBLE_OFFERS.PAGE_VIEWED}</code> is logged once after the page has successfully
  loaded data
- <code>{AmplitudeEvents.FLEXIBLE_OFFERS.OFFER_CARD_CLICKED}</code> is logged every time a user clicks
  on an offer card

## Design

<FigmaEmbed />

## Variants

List of variants can be shown below here.

### Success

<Canvas of={FlexibleOffers.Success} />

### Loading

<Canvas of={FlexibleOffers.Loading} />

### Error

<Canvas of={FlexibleOffers.Error} />
